(function () {function $StateHistoryProvider(){function t(t,o,r){function i(t){_history_.unshift(t)}function n(){return _history_[0]}function e(){c=!0}function s(){c=!1}function u(){return c}var a={},c=!1;return a.isHistoryLocked=u,a.back=function(){u()||e();var t=a.getLastState();return o.go(t.state.name,t.params).then(function(){_history_.splice(_history_.indexOf(t),1),s()})},a.getHistory=function(){return _history_},a.clear=function(){_history_=[]},a.lockHistory=e,a.unlockHistory=s,a.getLastState=n,a.setLastState=i,a}this.$get=t,t.$inject=["$rootScope","$state","$q"]}var _history_=[];angular.module("ui-router-history",["ui.router"]).provider("$stateHistory",$StateHistoryProvider).run(["$rootScope","$stateHistory",function(t,o){t.$on("$stateChangeSuccess",function(t,r,i,n,e){return o.isHistoryLocked()?o.unlockHistory():void o.setLastState({state:n,params:e})})}]);}());