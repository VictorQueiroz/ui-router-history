(function () {function $StateHistoryProvider(){function t(t,o,r){function n(t){_history_.unshift(t)}function i(){return _history_[0]}function e(){c=!0}function s(){c=!1}function a(){return c}var u={},c=!1;return u.isHistoryLocked=a,u.back=function(){a()||e();var t=u.getLastState();return o.go(t.state.name,t.params).then(function(){_history_.splice(_history_.indexOf(t),1),s()})},u.getHistory=function(){return _history_},u.clear=function(){_history_=[]},u.lockHistory=e,u.unlockHistory=s,u.getLastState=i,u.setLastState=n,u}this.$get=t,t.$inject=["$rootScope","$state","$q"]}var _history_=[];angular.module("ui-router-history",["ui.router"]).provider("$stateHistory",$StateHistoryProvider).run(["$rootScope","$stateHistory",function(t,o){t.$on("$stateChangeStart",function(){o.transitionState=!0}),t.$on("$stateChangeSuccess",function(t,r,n,i,e){return o.transitionState=!1,o.isHistoryLocked()?o.unlockHistory():void o.setLastState({state:i,params:e})})}]);});